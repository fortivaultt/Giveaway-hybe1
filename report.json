{
  "framework": {"frontend": "react+vite", "language": "ts", "functions": "netlify"},
  "packageManager": "npm",
  "steps": {
    "snapshot": {"status": "partial", "details": "Versions not collected due to ACL"},
    "install": {"status": "skipped", "reason": "ACL blocked npm install"},
    "staticAnalysis": {"tscNoEmit": "skipped", "eslint": "missing", "prettier": "missing"},
    "flowMapping": {
      "entry": "src/sections/Entry.tsx â†’ /entry",
      "form": "src/pages/EntryFormPage.tsx",
      "submit": "POST /.netlify/functions/post-entry (Bearer local_session)",
      "server": "netlify/functions/post-entry/index.js",
      "success": "in-page success state"
    },
    "supabaseAuth": {
      "sendOtp": "auth.signInWithOtp(shouldCreateUser by purpose)",
      "verifyOtp": "auth.verifyOtp(type email|signup)",
      "clientRedirect": "/dashboard after session saved",
      "emailRedirectTo": "not used"
    },
    "netlifyRedirects": {"file": "netlify.toml", "rule": "/* -> /index.html 200"},
    "envAudit": {
      "hardcodedKeys": false,
      "serverEnv": ["SUPABASE_URL", "SUPABASE_ANON_KEY", "SUPABASE_SERVICE_ROLE_KEY"],
      "risk": "SERVICE_ROLE acceptable on server only; ensure not exposed to client"
    },
    "simulation": {"status": "skipped", "reason": "ACL blocked execution"},
    "dbCheck": {"tables": ["entries", "ledger_entries"], "rls": "not verifiable here"},
    "securityScan": {"npmAudit": "skipped"},
    "errorHandling": {"status": "reviewed", "notes": "Good messages and codes"},
    "reactBestPractices": {"status": "reviewed", "notes": "No obvious issues in changed areas"},
    "tests": {"netlifyVitest": "present", "status": "skipped"}
  },
  "severities": [
    {"level": "Critical", "items": []},
    {"level": "High", "items": []},
    {"level": "Medium", "items": ["Entry form token mismatch corrected", "Linting/prettier missing"]},
    {"level": "Low", "items": ["Add CI for audit/tests", "Optional success page route"]}
  ],
  "patches": [
    "src/components/OnboardingModal.tsx",
    "src/styles/global.css",
    "src/pages/EntryFormPage.tsx"
  ],
  "logs": [
    "logs/01_snapshot.txt",
    "logs/08_simulation.txt",
    "logs/11_audit.txt",
    "logs/11_audit.json",
    "logs/14_tests.txt",
    "logs/patch.diff"
  ]
}